%% Document type
\documentclass[]{amsbook}

%% Packages
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{exercise}
\usepackage{hyperref}

%% User-defined commands
\newcommand{\q}{\quad}
\newcommand{\qq}{\qquad}
\newcommand{\catname}[1]{\mathbf{#1}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}

\newtheorem{prop}{Proposition}


\begin{document}
\title{Introduction to Categories and Categorical Logic}
\author{Vishal Lama}
\date{\today}
\maketitle
\tableofcontents

\chapter{Introduction to Categories and Categorical Logic}
\section{Introduction}
We say that a function $f: X \to Y$ is:\\~\\
\begin{tabular}{ l l }
	\emph{injective} & if $\forall x, x' \in X. f(x) = f(x') \implies x = x'$, \\
	\emph{surjective} & if $\forall y \in Y. \exists x \in X. f(x) = y$, \\~\\
	\emph{monic} & if $\forall g, h. f \circ g = f \circ h \implies g = h$
	\q ($f$ is left cancellative),\\
	\emph{epic} & if $\forall g, h. g \circ f = h \circ f \implies g = h$
	\q ($f$ is right cancellative).
\end{tabular}\\

\begin{prop}
	Let $f : X \to Y$. Then,
	\begin{enumerate}
		\item $f$ is injective $\iff f$ is monic.
		\item $f$ is surjective $\iff f$ is epic.
	\end{enumerate}
\end{prop}
\begin{proof}
	We first show $(1)$.\\
	($\impliedby$) Suppose $f$ is monic. Fix a one-element set
	$\boldsymbol{1} = \{ \bullet \}$. Then, note that elements $x \in X$ are in
	1-1 correspondence with functions $\bar{x}: \boldsymbol{1} \to X$, defined
	by $\bar{x}(\bullet) := x$. Then, for all $x, x' \in X$, we have\\~\\
	\begin{tabular} { l l }
		& $f(x) = f(x')$\\
		$\implies$ & $f(\bar{x}(\bullet)) = f(\bar{x'}(\bullet))$\\
		$\implies$ & $(f \circ \bar{x})(\bullet) = (f \circ \bar{x'})(\bullet)$\\
		$\implies$ & $f \circ \bar{x} = f \circ \bar{x'}$\\
		$\implies$ & $\bar{x} = \bar{x'}$ \q (since $f$ is monic) \\
		$\implies$ & $\bar{x}(\bullet) = \bar{x'}(\bullet)$\\
		$\implies$ & $x = x'$
	\end{tabular}\\
	This shows that $f$ is injective.\\

	($\implies$) Suppose $f$ is injective. Let $f \circ g = f \circ h$ for all
	$g, h: A \to X$. Then, for all $a \in A$,\\
	\begin{tabular} { l l }
		& $(f \circ g)(a) = (f \circ h)(a)$\\
		$\implies$ & $f(g(a)) = f(h(a))$\\
		$\implies$ & $g(a) = h(a)$ \q (since $f$ is injective)\\
		$\implies$ & $g = h$
	\end{tabular}\\
	This establishes that $f$ is monic. And, we are done.
\end{proof}

\setcounter{Exercise}{1}
\begin{Exercise}
	Show that $f: X \to Y$ is surjective iff it is epic.
\end{Exercise}
\begin{proof}
	($\implies$) Suppose $f: X \to Y$ is epic. And, assume, for the sake of contradiction,
	$f$ is \emph{not} surjective. Then, there exists some $y_0 \in Y$, such
	that, for all $x \in X$, $f(x) \ne y_0$. Define mappings $g, h: Y \to Y \cup \{ Y \}$
	by:
	\begin{center}
		$g(y) := y$\\~\\
		$h(y) :=
		\begin{cases}
		y & \text{if } y \ne y_0 \\
		Y & \text{if } y = y_0
		\end{cases}$
	\end{center}
	Note that $g \ne h$.\\
	Then, for all $x \in X$, $(g \circ f)(x) = g(f(x)) = h(f(x)) = (h \circ f)(x)$.
	This implies $g \circ f = h \circ f$, which implies $g = h$, since $f$ is
	epic. The last conclusion contradicts the fact that $g = h$. Thus, we
	conclude $f$ is	surjective.\\~\\
	($\impliedby$) Suppose $f: X \to Y$ is surjective. Then, for any $y \in Y$,
	there exists an $x \in X$, such that $f(x) = y$. Now, assume, for all
	$g, h: Y \to Z$, $g \circ f = h \circ f$. Then, for all $y \in Y$,
	$g(y) = g(f(x)) = (g \circ f)(x) = (h \circ f)(x) = h(f(x)) = h(y)$, which
	implies $g = h$, showing that $f$ is epic.\\
	And, this completes our proof.
\end{proof}

\setcounter{Exercise}{4}
\begin{Exercise}
	Suppose $G$ and $H$ are groups (and hence monoids), and that $h: G \to H$
	is a monoid homomorphism. Prove that $h$ is a group homomorphism.
\end{Exercise}
\begin{proof}
	We need only show that $h$ preserves inverses. To that end,
	suppose $g^{-1}$ is the inverse of $g \in G$. Then, $h(g) h(g^{-1}) =
	h(g g^{-1}) = h(1_G) = 1_H = h(1_G) = h(g^{-1} g) = h(g^{-1}) h(g)$.
	This establishes $h$ preserves inverses, and we are done.
\end{proof}

\begin{Exercise}
	Check that $\catname{Mon}, \catname{Vect}_k, \catname{Pos}$, and
	$\catname{Top}$ are indeed categories.
\end{Exercise}
\begin{proof}
	($\catname{Mon}$) The objects are monoids $(M, \cdot, 1_M)$, and morphisms
	are monoid homomorphisms. Given monoid homomorphisms, $f: (M, \cdot, 1_M)
	\to (N, \cdot, 1_N)$ and $g: (N, \cdot, 1_N) \to (P, \cdot, 1_P)$, the
	function $g \circ f: (M, \cdot, 1_M) \to (P, \cdot, 1_P)$ is also a monoid
	homomorphism, because for all $m, m' \in M$, we have $(g \circ f)(m m') =
	g(f(m m')) = g(f(m) f(m')) = (g(f(m)) (g(f(m'))) = ((g \circ f)(m))
	((g \circ f)(m'))$. Also, for each monoid, the identity morphism is the
	identity function. It is also easy to check that for all monoid
	homomorphisms $f, g$ and $h$ with the appropriate domains and codomains,
	$h \circ (g \circ f) = (h \circ g) \circ f$. This establishes that
	$\catname{Mon}$ is indeed a category.

	($\catname{Vect}_k$) The objects are vector spaces over a field $k$, and
	morphisms are linear maps between vector spaces. Suppose $f: U \to V$ and
	$g: V \to W$ are linear maps. Then, for all $x, y \in U$, we have
	$(g \circ f)(x + y) = g(f(x + y)) = g(f(x) + f(y)) = g(f(x)) + g (f(y)) =
	(g \circ f)(x) + (g \circ f)(y)$. Also, for all $\alpha \in k$, we have
	$(g \circ f)(\alpha x) = g(f(\alpha x)) = g(\alpha f(x)) = \alpha g(f(x))
	= \alpha (g \circ f)(x)$. This establishes $g \circ f: U \to W$ is a
	linear map as well. The identity map $1_U$ for any vector space $U$ is the
	identity morphism. The associativity of linear maps and the identity axiom
	follow from the	property of functions. This shows that $\catname{Vect}_k$
	is also a category.

    ($\catname{Pos}$) The objects are partially ordered sets, and morphisms
    are monotone functions between these sets. Suppose $h: P \to Q$ and
    $g: Q \to R$ are monotone functions. Then, for all $x, y \in P$,
    $x \le y \implies h(x) \le h(y) \implies g(h(x)) \le g(h(y)) \implies
    (g \circ h)(x) \le (g \circ h)(y)$, which shows $g \circ h: P \to R$ is
    a monotone function. The identity map is the identity morphism, and the
    associativity and identity axioms are satisfied by the property of
    functions. This establishes $\catname{Pos}$ is a category.

    ($\catname{Top}$) The objects are topological spaces, and morphisms are
    continuous maps between these spaces. Given continuous maps $f: (X, T_X)
    \to (Y, T_Y)$ and $g: (Y, T_Y) \to (Z, T_Z)$, we can show that $g \circ f:
    (X, T_X) \to (Z, T_Z)$ is also a continuous map. First, note that for any
    $T \subset Z$, $x \in (g \circ f)^{-1}(T)$ iff $(g \circ f)(x) \in T$ iff
    $g(f(x)) \in T$ iff $f(x) \in g^{-1}(T)$ iff $x \in f^{-1}(g^{-1}(T))$.
    Thus,
    \begin{center}
	    for all $T \subset Z, (g \circ f)^{-1}(T) = f^{-1}(g^{-1}(T))$.
    \end{center}
	Therefore, for any open set $T \in T_Z$, we have $g^{-1}(T) \in T_Y$,which
	implies	$f^{-1}(g^{-1}(T)) \in T_X$, which implies $(g \circ f)^{-1}(T)
	\in T_X$ (by using the result above.) Hence, $g \circ f: (X, T_X) \to
	(Z, T_Z)$ is a continuous map. The associativity and identity axioms follow
	from the associativity and identity laws for functions. This establishes
	$\catname{Top}$ is a category.
\end{proof}

\begin{Exercise}
    Check carefully that monoids correspond exactly to one-object categories.
    Make sure you understand the difference between such a category and
    $\catname{Mon}$. (For example: how many objects does $\catname{Mon})$
    have?)
\end{Exercise}
\begin{proof}
    (\href{https://ncatlab.org/nlab/show/monoid#as_a_oneobject_category}
    {Monoid as a one-object category}) Given a monoid $(M, \cdot, 1)$,
    we can construct its corresponding category as follows. We write
    $\catname{B}M$ for the corresponding category with a single object
    $\bullet$, where $\catname{Hom}_{\catname{B}M}(\bullet, \bullet) := M$.
    We note then that the composition map in $\catname{B}M$ is reflected in
    the binary operation $\_ \cdot \_ : M \times M \to M$, where
    $\mathbf{id}_{\bullet} := 1$. Then, the associative and identity laws for
    the category $\catname{B}M$ follow directly from the associative and
    identity laws, respectively, satisfied by the monoid $(M, \cdot, 1)$.
    This shows any monoid can be seen or interpreted as a one-object category.
\end{proof}

\begin{Exercise}
    Check carefully that preorders correspond exactly to categories in which
    each homset has at most one element. Make sure you understand the
    difference between such a category and $\catname{Pos}$. (For example: how
    big can homsets in $\catname{Pos}$ be?)
\end{Exercise}
\begin{proof}
	Let $(P, \le)$ be a preorder. Then, we define the corresponding category
	$\catname{C}$ as follows. The objects of $\catname{C}$ are the elements of
	the set $P$, and for all $x, y \in P$, we define a morphism $x \to y$ iff
	$x \le y$. Then, for every object $x \in \catname{C}$, the identity
	morphism $1_x: x \to x$ corresponds exactly to the reflexive property
	$x \le x$ for all $x \in P$. Note that each homset in $\catname{C}$ has at
	most one element. Also, for every $x \to y$ and $y \to z$ in $\catname{C}$,
	$x \to z$ follows from the fact that $x \le y$ and $y \le z$ and the
	transitivity of the $\le$ relation on $P$. This defines a composition map
	for morphisms in $\catname{C}$. In addition, for all morphisms $x \to y$,
	$y \to z$, and $z \to w$, their associativity follows immediately from the
	transitivity of $\le$. Lastly, the unit laws also follow from the same
	transitivity relation. Therefore, we conclude that every preorder
	corresponds precisely to a category in which each homset has at most one
	element.
\end{proof}

\setcounter{Exercise}{9}
\begin{Exercise}
	Show that the inverse, if it exists, is unique.
\end{Exercise}
\begin{proof}
	Suppose $i: A \to B$ is an isomorphism, with inverse $j: B \to A$, in a
	category $\catname{C}$. Suppose $j': B \to A$ is also an inverse of $i$.
	Then, $j = 1_A \circ j = (j' \circ i) \circ j = j' \circ (i \circ j) =
	j' \circ 1_B = j'$, and we are done.
\end{proof}

\begin{Exercise}
	Show that $\cong$ is an equivalence relation on the objects of a category.
\end{Exercise}
\begin{proof}
	Let $\catname{C}$ be some category.\\
	(\emph{Reflexivity}) For any object $X \in \catname{C}$, $X \cong X$
	follows from the fact that the identity morphism $1_X: X \to X$ is an
	isomorphism.\\
	(\emph{Symmetry}) If $X \cong Y$, then there exists an isomorphism $i: X
	\to Y$. But, the inverse, $i^{-1}: Y \to X$, of $i$ is also an isomorphism.
	Hence, $Y \cong X$.\\
	(\emph{Transitivity}) Suppose $X \cong Y$ and $Y \cong Z$. Then, there
	exist isomorphisms $i: X \to Y$ and $j: Y \to Z$. Then, we claim that
	$j \circ i: X \to Z$ is also an isomorphism. Indeed, its trivial to show
	that its inverse is the morphism $i^{-1} \circ j^{-1}: Z \to X$. This
	implies $X \cong Z$.\\
	We thus conclude that $\cong$ is an equivalence relation on the objects of
	a category.
\end{proof}

\begin{Exercise}
	Verify the claims that isomorphisms in $\catname{Set}$ correspond exactly
	to bijections, in $\catname{Grp}$ to group isomorphisms, in $\catname{Top}$
	to homeomorphisms, and in $\catname{Pos}$ to isomorphisms.
\end{Exercise}
\begin{proof}
    ($\catname{Set}$) We claim the following:
    \begin{enumerate}
        \item $f: X \to Y$ is injective iff $f$ has a left inverse.
        \item $f: X \to Y$ is surjective iff $f$ has a right inverse.
    \end{enumerate}
    We first show (1).

    ($\implies$) Suppose $f: X \to Y$ has a left inverse, $g: Y \to X$, say.
    Then, $g \circ f = 1_X$. Assume for any $x, x' \in X, f(x) = f(x')$. Then,
    $x = 1_X(x) = (g \circ f)(x) = g(f(x)) = g(f(x')) = (g \circ f)(x') =
    1_X(x') = x'$, which implies $f$ is injective.

    ($\impliedby$) Suppose $f: X \to Y$ is injective. If $X$ is empty, then $f$
    is an empty function corresponding to each $Y$. In this case, $1_X$ is also
    an empty function, and we thus have $g \circ f = 1_X$ for any $g: Y \to X$.
    That is, $f$ has a left inverse. On the other hand, if $X$ is nonempty,
    choose some $x_0 \in X$. Define $g: Y \to X$ by
    \begin{center}
        $g(y) :=
        \begin{cases}
        x_0 & \text{if } y \in Y \setminus \mathbf{Im}(f) \\
        f^{-1}(y) & \text{if } y \in \mathbf{Im}(f)
        \end{cases}$
    \end{center}
    Then, for all $x \in X, (g \circ f)(x) = g(f(x)) = x = 1_X(x)$, which
    implies $g \circ f = 1_X$, thus showing that $g$ is a left inverse of $f$.

    We now show (2).

    ($\implies$) Suppose $f: X \to Y$ has a right inverse, $g: Y \to X$, say.
    Then, $f \circ g = 1_Y$. Therefore, for all $y \in Y$, $y = 1_Y(y) =
    (f \circ g)(y) = f(g(y)) = f(x)$, where $x = g(y)$. This shows $f$ is
    surjective.

    ($\impliedby$) Suppose $f: X \to Y$ is surjective. Now, consider an indexed
    family of nonempty sets $\{ f^{-1}(y)\}_{y \in Y}$. Then, using the axiom
    of choice, we conclude there exists a function $g: Y \to X$, such that $g(y)
    \in f^{-1}(y)$ for all $y \in Y$. Then, for all $y \in Y$, $(f \circ g)(y) =
    f(g(y)) = y = 1_Y(y)$, which implies $f \circ g = 1_Y$, thus proving $f$ has
    a right inverse.

    Since in $\catname{Set}$ a bijection is a function which is both injective
    and surjective, using (1) and (2), we immediately conclude that bijections
    in $\catname{Set}$ correspond exactly to isomorphisms, and we are done.

    In addition, in any category $\catname{C}$, if $f: X \to Y$ has both a left
    inverse, $g: Y \to X$, say, and a right inverse, $h: Y \to X$, say, then
    $g = h$. Indeed, $g = g \circ 1_Y = g \circ (f \circ h) = (g \circ f) \circ
    h = 1_X \circ h = h$, and we are done.\\

    % TODO
    ($\catname{Grp}$)

    % TODO
    ($\catname{Top}$)

    % TODO
    ($\catname{Pos}$)
\end{proof}

\subsection*{Opposite Categories and Duality}
Given a category $\catname{C}$, the opposite category $\catname{C}^{\mathbf{op}}$
is given by taking the same objects as $\catname{C}$, and
\begin{center}
    $\catname{C}^{\mathbf{op}}(A, B) = \catname{C}(B, A)$.
\end{center}

Composition and identities are inherited from $\catname{C}$.\\
If we have
\begin{center}
    $A \xrightarrow{f} B \xrightarrow{g} C$
\end{center}
in $\catname{C}^{\mathbf{op}}$, this means
\begin{center}
    $A \xleftarrow{f} B \xleftarrow{g} C$
\end{center}
in $\catname{C}$. Therefore, composition $ g \circ f$ is
$\catname{C}^{\mathbf{op}}$ is defined as $f \circ g$ in $\catname{C}$. This
leads to the \emph{\textbf{principle of duality}}: a statement $S$ is true
about a category $\catname{C}$ iff its dual (\emph{i.e.} the one obtained
from $S$ by reversing all the arrows) is true about $\catname{C}^{\mathbf{op}}$.
For example, a morphism $f$ is monic in $\catname{C}^{\mathbf{op}}$ iff it is
epic in $\catname{C}$. We say monic and epic are \emph{dual notions}.

\setcounter{Exercise}{13}
\begin{Exercise}
    If $P$ is a preorder, for example $(\R, \le)$, describe $P^{\mathbf{op}}$
    explicitly.
\end{Exercise}
\begin{proof}
    An arrow $a \le_{P^{\mathbf{op}}} b$ in $P^{\mathbf{op}}$ is precisely the
    arrow $b \le_P a$ in $P$. When $P = (\R, \le)$, $P^{\mathbf{op}}$ describes
    the ``greater than or equal" preorder relation on $\R$.
\end{proof}

\subsection*{Subcategories}
Let $\catname{C}$ be a category. Suppose we are given the collections
\begin{center}
    $\mathbf{Ob}(\catname{D}) \subseteq \mathbf{Ob}(\catname{C})$,\\
    $\forall A, B \in \mathbf{Ob}(\catname{D}).
    \catname{D}(A, B) \subseteq \catname{C}(A, B)$.
\end{center}
We say $\catname{D}$ is a \emph{\textbf{subcategory}} of $\catname{C}$ if
it is itself a category. In particular, $\catname{D}$ is:
\begin{itemize}
    \item A \emph{\textbf{full}} subcategory of $\catname{C}$ if for any
    $A, B \in \mathbf{Ob}(\catname{D})$, $\catname{D}(A, B) = \catname{C}(A, B)$.
    \item  A \emph{\textbf{lluf}} subcategory of $\catname{C}$ if
    $\mathbf{Ob}(\catname{D}) = \mathbf{Ob}(\catname{C})$.
\end{itemize}
For example, $\catname{Grp}$ is a full subcategory of $\catname{Mon}$, and
$\catname{Set}$ is a lluf subcategory of $\catname{Rel}$.

\end{document}
